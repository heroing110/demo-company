<form #yearForm="ngForm" [class.show-error]="showError">
  <div class="form-inline" [class.readonly-all]="readonlyAll" style="padding: 1em;">
    <div class="form-group margin-right">
      <label>单位详细名称</label>
      <input type="text" class="form-control input-sm"
             [value]="yearObj.companyName" name="companyName" readonly>
    </div>

    <div class="form-group margin-right">
      <label class="text-right">年度</label>
      <input type="text" class="form-control input-sm" maxlength="4"
             [(ngModel)]="yearObj.year" name="year" pattern="^2\d{3}$"
             [readonly]="modifyMode" required #year="ngModel"
             appTooltip="" title="年度格式为4位的数字如: 2016">
    </div>

    <div class="form-group">
      <label class="text-right">电子商务经营类型</label>
      <select class="form-control input-sm" [class.not-allow-modify]="modifyMode"
              [(ngModel)]="yearObj.industry" name="industry" required>
        <option value="">请选择行业类别</option>
        <option value="电子商务应用企业">电子商务应用企业</option>
        <option value="电子商务服务企业">电子商务服务企业</option>
        <option value="电子商务综合型企业">电子商务综合型企业</option>
      </select>
    </div>

  </div>

  <table [class.readonly-all]="readonlyAll" class="table table-bordered table-hover small">
    <colgroup>
      <col style="width: 170px;">
      <col>
      <col style="width: 170px;">
      <col>
    </colgroup>
    <tbody>
    <tr>
      <td>1. 法定代表人（单位负责人）</td>
      <td>
        <input type="text" class="form-control input-sm" [(ngModel)]="yearObj.cell11"
               name="cell11" required pattern="^[\u4E00-\u9FFF]+$"
               #cell11="ngModel"
               maxlength="10"
               appTooltip="" title="法人代表名称只能是中文">
        <span class="text-danger"
              *ngIf="cell11.invalid && ((cell11.touched || cell11.dirty) || showError)">法人只能填写汉字</span>
      </td>
      <td>2. 联系方式（单位负责人）</td>
      <td>
        <input type="text" class="form-control input-sm"
               placeholder="请输入11位手机号码" pattern="\d{11}" maxlength="11"
               [(ngModel)]="yearObj.cell21" name="cell21" #cell21="ngModel"
               appTooltip="" title="手机号码的格式为1开头的11位数字">
      </td>
    </tr>
    <tr>
      <td colspan="4">3. 企业信息</td>
    </tr>
    <tr>
      <td>3.1 单位详细地址</td>
      <td>
        <input type="text" class="form-control input-sm"
               [(ngModel)]="yearObj.cell31" name="cell31" #cell31="ngModel" required>
      </td>
      <td>3.2 邮政编码</td>
      <td>
        <input type="text" class="form-control input-sm"
               pattern="^\d{6}$"
               placeholder="请输入6位邮政编码" maxlength="6"
               [(ngModel)]="yearObj.cell32" name="cell32" #cell32="ngModel" required
               appTooltip="" title="邮政编码是一个6位的纯数字如:000001">
      </td>
    </tr>
    <tr>
      <td>3.3 电话号码</td>
      <td>
        <input type="text" class="form-control input-sm"
               placeholder="0121-12345678"
               pattern="^\d{3,4}-\d{7,8}$" maxlength="13"
               [(ngModel)]="yearObj.cell33" name="cell33" #cell33="ngModel"
               appTooltip="" title="座机号码：区号(3-4位) - 座机号(7-8位)">
        <span>座机号码：区号(3-4位) - 座机号(7-8位)</span>
      </td>
      <td>3.4 手机号码</td>
      <td>
        <input type="text" class="form-control input-sm"
               [(ngModel)]="yearObj.cell34" name="cell34"
               placeholder="请输入11位手机号码"
               #cell34="ngModel" pattern="\d{11}" required maxlength="11"
               appTooltip="" title="手机号码的格式为1开头的11位数字">
        <span class="text-danger" *ngIf="cell34.invalid && ((cell34.touched || cell34.dirty) || showError)">
          手机号为11位数字
        </span>
      </td>
    </tr>
    <tr>
      <td>3.5 传真号码</td>
      <td>
        <input type="text" class="form-control input-sm"
               placeholder="0121-12345678"
               pattern="^\d{3,4}-\d{7,8}$" maxlength="13"
               [(ngModel)]="yearObj.cell35" name="cell35" #cell35="ngModel" required
               appTooltip="" title="座机号码：区号(3-4位) - 座机号(7-8位)">
        <span>传真号码：区号(3-4位) - 座机号(7-8位)</span>
      </td>
      <td>3.6 企业网站名称及网址</td>
      <td class="form-inline">
        <input type="text" class="form-control input-sm" placeholder="企业网站名称"
               [(ngModel)]="yearObj.cell36a" name="cell36a" #cell36a="ngModel" required>
        <input type="text" class="form-control input-sm" placeholder="网址"
               [(ngModel)]="yearObj.cell36b" name="cell36b" #cell36b="ngModel" required>
      </td>
    </tr>
    <tr>
      <td>3.7 自营电子商务平台名称及网址</td>
      <td class="form-inline">
        <input type="text" class="form-control input-sm" placeholder="商务平台名称"
               [(ngModel)]="yearObj.cell37a" name="cell37a" #cell37a="ngModel" required>
        <input type="text" class="form-control input-sm" placeholder="网址"
               [(ngModel)]="yearObj.cell37b" name="cell37b" #cell37b
                 ="ngModel" required>
      </td>
      <td>3.8 借助第三方交易平台名称及网址</td>
      <td class="form-inline">
        <input type="text" class="form-control input-sm" placeholder="第三方交易平台名称"
               [(ngModel)]="yearObj.cell38a" name="cell38a" #cell38a="ngModel" required>
        <input type="text" class="form-control input-sm" placeholder="网址"
               [(ngModel)]="yearObj.cell38b" name="cell38b" #cell38b="ngModel" required>
      </td>
    </tr>
    <tr>
      <td>4. 企业所在市</td>
      <td>
        <select appSelectpicker class="form-control input-sm" name="city" [(ngModel)]="yearObj.city" required>
          <option value="">请选择城市</option>
          <option value="沈阳">沈阳</option>
          <option value="大连">大连</option>
          <option value="鞍山">鞍山</option>
          <option value="抚顺">抚顺</option>
          <option value="本溪">本溪</option>
          <option value="丹东">丹东</option>
          <option value="锦州">锦州</option>
          <option value="营口">营口</option>
          <option value="阜新">阜新</option>
          <option value="辽阳">辽阳</option>
          <option value="盘锦">盘锦</option>
          <option value="铁岭">铁岭</option>
          <option value="朝阳">朝阳</option>
          <option value="葫芦岛">葫芦岛</option>
        </select>
      </td>
      <td>5. 交易模式(可多选)</td>
      <td>
        <select appSelectpicker class="form-control input-sm"
                multiple name="sale" [(ngModel)]="yearObj.sale" required
                title="请选择交易模式">
          <option value="B2B">B2B</option>
          <option value="B2C">B2C</option>
          <option value="C2C">C2C</option>
        </select>
      </td>
    </tr>
    <tr>
      <td>6. 跨境电子商务经营情况</td>
      <td colspan="3">
        <p class="text-left">
          <input type="checkbox" name="checkbox3"
                 [(ngModel)]="checkbox3" value="span_41"/>
          开展跨境电子商务类型(可多选)
          <select appSelectpicker *ngIf="checkbox3"
                  class="form-control input-sm"
                  multiple
                  name="crossCountry"
                  style="display: inline-block;width: auto;"
                  [(ngModel)]="yearObj.crossCountry"
                  required title="请选择商务类型">
            <option value="进口">进口</option>
            <option value="出口">出口</option>
          </select>
        </p>
        <div *ngIf="checkbox3">
          <p>
            开展跨境电子商务业务的主要交易平台：
          </p>
          <p class="form-inline text-left">
            自营平台 <input type="checkbox" name="checkbox1" [(ngModel)]="checkbox1" value="span_41"/>
            <span *ngIf="checkbox1" class="form-inline">
      				平台名称及网址
      				<input type="text" class="form-control input-sm"
                     [(ngModel)]="yearObj.cell41a"
                     name="cell41a"
                     placeholder="平台名称"
                     required>
      				<input type="text" class="form-control input-sm"
                     [(ngModel)]="yearObj.cell41b"
                     name="cell41b"
                     placeholder="网址"
                     style="width: 300px;"
                     required>
      	            </span>
          </p>
          <p class="form-inline text-left">
            其他平台 <input type="checkbox" name="checkbox2" [(ngModel)]="checkbox2" value="span_42"/>
            <span *ngIf="checkbox2" class="form-inline">
      				平台名称及网址
      				<input type="text" class="form-control input-sm"
                     [(ngModel)]="yearObj.cell42a"
                     name="cell42"
                     placeholder="平台名称"
                     required>
      				<input type="text" class="form-control input-sm"
                     [(ngModel)]="yearObj.cell42b"
                     name="cell42b"
                     placeholder="网址"
                     style="width: 300px;"
                     required>
                    </span>
          </p>
        </div>
      </td>
    </tr>
    <tr>
      <td>7. 期末从业人员情况</td>
      <td colspan="3">
        <div class="form-inline">
          期末从业人员合计
          <input type="number" class="form-control input-sm margin-right" style="width: 100px;"
                 [value]="getCount(cell52,cell53,cell54)" readonly>
          研究生及以上
          <input type="number" class="form-control input-sm margin-right" style="width: 100px;" min="0"
                 [(ngModel)]="yearObj.cell52" name="cell52" placeholder="人" #cell52="ngModel" required>

          大学本（专）科
          <input type="number" class="form-control input-sm margin-right" style="width: 100px;" min="0"
                 [(ngModel)]="yearObj.cell53" name="cell53" placeholder="人" #cell53="ngModel" required>
          高中及以下
          <input type="number" class="form-control input-sm" style="width: 100px;" min="0"
                 [(ngModel)]="yearObj.cell54" name="cell54" placeholder="人" #cell54="ngModel" required> <br>
        </div>

      </td>
    </tr>
    <tr *ngIf="yearObj.industry !== '电子商务应用企业'">
      <td>8. 企业主要经济指标</td>
      <td colspan="3">
        <div class="form-inline">
          1、电子商务交易额
          <input type="number" class="form-control input-sm margin-right"
                 style="width: 100px;"
                 [value]="getCount(cell62,cell63)" readonly>

          其中商品类
          <input type="number" class="form-control input-sm"
                 style="width: 100px;" min="0"
                 [(ngModel)]="yearObj.cell62" name="cell62" #cell62="ngModel" placeholder="万元" required>
          服务类
          <input type="number" class="form-control input-sm"
                 style="width: 100px;" min="0"
                 [(ngModel)]="yearObj.cell63" name="cell63" #cell63="ngModel" placeholder="万元" required>
          (注：电子应用/综合型企业填写)

          <p></p>

          2、电子商务服务收入
          <input type="number" class="form-control input-sm"
                 style="width: 100px;" min="0"
                 [(ngModel)]="yearObj.cell64" name="cell64" #cell64="ngModel" placeholder="万元" required>
          <p></p>

          3、电子商务网络零售额
          <input type="number" class="form-control input-sm" style="width: 100px;"
                 [value]="getCount(cell66,cell67)" readonly>
          其中商品类
          <input type="number" class="form-control input-sm" style="width: 100px;" min="0"
                 [(ngModel)]="yearObj.cell66" name="cell66" #cell66="ngModel" placeholder="万元" required>
          服务类
          <input type="number" class="form-control input-sm" style="width: 100px;" min="0"
                 [(ngModel)]="yearObj.cell67" name="cell67" #cell67="ngModel" placeholder="万元" required>
          (注：电商应用/综合型企业)
        </div>
      </td>
    </tr>
    </tbody>
  </table>

  <div [class.readonly-all]="readonlyAll" class="form-inline" style="padding: 1em;">
    <div class="form-group margin-right">
      填表人：
      <input type="text" class="form-control input-sm"
             [(ngModel)]="yearObj.cell71" name="cell71" required>
    </div>
    <div class="form-group margin-right">
      职务：
      <input type="text" class="form-control input-sm"
             [(ngModel)]="yearObj.cell72" name="cell72" required>
    </div>
    <div class="form-group margin-right">
      手机：
      <input type="text" class="form-control input-sm"
             placeholder="请输入11位手机号码" maxlength="11"
             [(ngModel)]="yearObj.cell74" name="cell74" pattern="^1\d{10}$" required
             appTooltip="" title="手机号码的格式为1开头的11位数字">
    </div>
    <div class="form-group">
      填报日期:
      <input type="text" class="form-control input-sm" appDatepicker
             [(value)]="yearObj.cell75" [option]="datePickerOption" required/>
    </div>
    <p></p>
    <div class="form-group">
      联系电话：
      <input type="text" class="form-control input-sm"
             [(ngModel)]="yearObj.cell73" name="cell73"
             placeholder="0121-12345678" maxlength="13"
             pattern="^\d{3,4}-\d{7,8}$"
             appTooltip="" title="座机号码：区号(3-4位) - 座机号(7-8位)">
      <span>座机号码：区号(3-4位) - 座机号(7-8位)</span>
    </div>
  </div>
  <hr/>
  <div class="text-center">
    <button type="submit" class="btn btn-primary"
            *ngIf="!readonlyAll"
            (click)="saveYear(yearForm)">提交
    </button>
    <button type="button" class="btn btn-default" (click)="back()">返回</button>
  </div>
</form>
